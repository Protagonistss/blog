---
title: "æ•°æ®å­—å…¸ä¸æšä¸¾çš„åŒºåˆ«ä¸ç»Ÿä¸€è®¾è®¡æ–¹æ¡ˆ"
description: "æ•°æ®å­—å…¸å’Œæšä¸¾çš„æ€è€ƒ"
pubDate: "2025-10-26T23:37:12.000Z"
tags: ["dict"]
categories: ["backend"]
draft: false
---

# æ•°æ®å­—å…¸ä¸æšä¸¾çš„åŒºåˆ«ä¸ç»Ÿä¸€è®¾è®¡æ–¹æ¡ˆ

## ä¸€ã€æ¦‚å¿µåŒºåˆ†

| é¡¹ç›® | æ•°æ®å­—å…¸ (Data Dictionary) | æšä¸¾ (Enum) |
|------|-----------------------------|--------------|
| **å®šä¹‰** | å­˜æ”¾åœ¨æ•°æ®åº“æˆ–é…ç½®è¡¨ä¸­çš„ã€å¯é…ç½®çš„ä¸šåŠ¡ä»£ç ä¸åç§°æ˜ å°„ | å®šä¹‰åœ¨ä»£ç ä¸­çš„ã€ç¼–è¯‘æ—¶å›ºå®šçš„å¸¸é‡é›†åˆ |
| **ä½ç½®** | æ•°æ®å±‚ï¼ˆæ•°æ®åº“ã€é…ç½®ä¸­å¿ƒï¼‰ | åº”ç”¨å±‚ï¼ˆä»£ç ä¸­ï¼‰ |
| **ä¿®æ”¹æ–¹å¼** | è¿è¡Œæ—¶å¯ä¿®æ”¹ï¼Œæ— éœ€ç¼–è¯‘ | ä¿®æ”¹éœ€é‡æ–°ç¼–è¯‘éƒ¨ç½² |
| **ä½¿ç”¨åœºæ™¯** | ç»å¸¸å˜åŒ–ã€éœ€è¦ä¸šåŠ¡å¯é…ç½®åŒ– | å›ºå®šã€é€»è¾‘ç¨³å®šçš„çŠ¶æ€å¸¸é‡ |
| **å…¸å‹ç”¨é€”** | æ€§åˆ«ã€åœ°åŒºã€è®¢å•çŠ¶æ€ã€ä¸‹æ‹‰æ¡†é€‰é¡¹ç­‰ | ç³»ç»Ÿå†…éƒ¨çŠ¶æ€ã€é€»è¾‘åˆ¤æ–­ã€å¸¸é‡å®šä¹‰ |

---

## äºŒã€ç¤ºä¾‹å¯¹æ¯”

### æ•°æ®å­—å…¸ç¤ºä¾‹
```sql
-- è¡¨ï¼šsys_dict
id | dict_type   | dict_code | dict_label | sort | status
---|--------------|------------|-------------|------|---------
1  | gender       | M          | ç”·          | 1    | 1
2  | gender       | F          | å¥³          | 2    | 1
3  | order_status | PENDING    | å¾…æ”¯ä»˜       | 1    | 1
4  | order_status | PAID       | å·²æ”¯ä»˜       | 2    | 1
```

### æšä¸¾ç¤ºä¾‹ï¼ˆJavaï¼‰
```java
public enum OrderStatus {
    PENDING("å¾…æ”¯ä»˜"),
    PAID("å·²æ”¯ä»˜"),
    SHIPPED("å·²å‘è´§");

    private final String label;
    OrderStatus(String label) { this.label = label; }
    public String getLabel() { return label; }
}
```

---

## ä¸‰ã€ä¸ºä»€ä¹ˆä¸èƒ½ç”¨æ•°æ®å­—å…¸å®Œå…¨æ›¿ä»£æšä¸¾

### 1. ç±»å‹å®‰å…¨ç¼ºå¤±
æ•°æ®å­—å…¸å€¼ä¸ºå­—ç¬¦ä¸²ï¼Œç¼–è¯‘å™¨æ— æ³•æ ¡éªŒï¼›  
æšä¸¾æ˜¯å¼ºç±»å‹ï¼Œå¯é˜²æ­¢æ‹¼å†™é”™è¯¯å¹¶æ”¯æŒ IDE æç¤ºã€‚

### 2. æ€§èƒ½ä¸ä¾èµ–é—®é¢˜
å­—å…¸ä¾èµ–æ•°æ®åº“æˆ–ç¼“å­˜åŠ è½½ï¼›  
æšä¸¾ä¸ºç¼–è¯‘å¸¸é‡ï¼ŒåŠ è½½é€Ÿåº¦æ›´å¿«ä¸”æ— å¤–éƒ¨ä¾èµ–ã€‚

### 3. é€»è¾‘æ§åˆ¶å›°éš¾
æšä¸¾å¯ç›´æ¥ç”¨äº `switch-case`ã€è¡Œä¸ºç»‘å®šï¼›  
å­—å…¸ä»…ä¸ºæ•°æ®é¡¹ï¼Œä¸å…·å¤‡è¡Œä¸ºèƒ½åŠ›ã€‚

### 4. ç¨³å®šæ€§ä¸å®‰å…¨æ€§
è¿è¥è¯¯æ”¹å­—å…¸é¡¹å¯èƒ½å¯¼è‡´é€»è¾‘å¤±æ•ˆï¼›  
æšä¸¾ä¸ºåªè¯»å¸¸é‡ï¼Œé€»è¾‘æ›´ç¨³å®šã€‚

---

## å››ã€æ¨èæ–¹æ¡ˆï¼šåŒè½¨è®¾è®¡

> **å†…éƒ¨ä½¿ç”¨æšä¸¾ + å¤–éƒ¨ç”¨æ•°æ®å­—å…¸æ˜ å°„**

- é€»è¾‘å±‚ï¼ˆå†…éƒ¨ï¼‰ï¼šä½¿ç”¨æšä¸¾æ§åˆ¶æµç¨‹ä¸åˆ†æ”¯é€»è¾‘  
- å±•ç¤ºå±‚ï¼ˆå¤–éƒ¨ï¼‰ï¼šä»å­—å…¸è¡¨è¯»å–å±•ç¤ºæ–‡å­—ã€æ’åºã€æè¿°  
- ä¸¤è€…é€šè¿‡ç»Ÿä¸€æ¥å£æ³¨å†Œå’Œæ˜ å°„

### ç¤ºä¾‹ç»“æ„

| å±‚çº§ | å†…å®¹ | ç¤ºä¾‹ |
|------|------|------|
| æšä¸¾ | å®šä¹‰é€»è¾‘å¸¸é‡ | `OrderStatus.PAID` |
| å­—å…¸ | å®šä¹‰å±•ç¤ºå†…å®¹ | â€œå·²æ”¯ä»˜â€ |
| æ¥å£ | å¯¹å¤–ç»Ÿä¸€æ ¼å¼ | `/api/dict/order_status` |

---

## äº”ã€ç»Ÿä¸€å¯¹å¤–æ•°æ®æ¥å£è®¾è®¡

### REST ç¤ºä¾‹
```http
GET /api/dict/order_status
```

è¿”å›ï¼š
```json
{
  "type": "order_status",
  "items": [
    { "value": "PENDING", "label": "å¾…æ”¯ä»˜" },
    { "value": "PAID", "label": "å·²æ”¯ä»˜" },
    { "value": "SHIPPED", "label": "å·²å‘è´§" }
  ]
}
```

### GraphQL ç¤ºä¾‹
```graphql
query {
  dict(type: "order_status") {
    value
    label
  }
}
```

---

## å…­ã€ç»Ÿä¸€æ³¨å†Œæœºåˆ¶è®¾è®¡

```java
@Component
public class DictRegistry {

    @Autowired
    private DictRepository dictRepository;

    private final Map<String, List<DictItem>> cache = new HashMap<>();

    @PostConstruct
    public void init() {
        cache.putAll(dictRepository.loadAll()); // åŠ è½½æ•°æ®åº“å­—å…¸
        cache.put("order_status", EnumDictUtil.fromEnum(OrderStatus.class));
        cache.put("user_role", EnumDictUtil.fromEnum(UserRole.class));
    }

    public List<DictItem> getDict(String type) {
        return cache.get(type);
    }
}
```

æ”¯æŒç»Ÿä¸€æ¥å£ï¼š
```http
GET /api/dict/{type}
```

---

## ä¸ƒã€å¯¹å¤–ç»Ÿä¸€æ ¼å¼ï¼ˆæ¨èï¼‰

```json
{
  "type": "order_status",
  "version": "2025-10-26",
  "source": "enum",
  "items": [
    { "value": "PENDING", "label": "å¾…æ”¯ä»˜", "desc": "ç­‰å¾…ç”¨æˆ·æ”¯ä»˜" },
    { "value": "PAID", "label": "å·²æ”¯ä»˜", "desc": "ç”¨æˆ·å·²å®Œæˆä»˜æ¬¾" },
    { "value": "SHIPPED", "label": "å·²å‘è´§", "desc": "å–å®¶å·²å‘å‡ºè´§ç‰©" }
  ]
}
```

---

## å…«ã€è‡ªåŠ¨åŒæ­¥æœºåˆ¶ï¼ˆå¯é€‰ï¼‰

```java
@Component
public class EnumDictSyncer {

    @EventListener(ApplicationReadyEvent.class)
    public void syncEnums() {
        sync(OrderStatus.class, "order_status");
        sync(UserRole.class, "user_role");
    }

    private void sync(Class<? extends BaseEnum> enumClass, String type) {
        List<DictItem> items = EnumDictUtil.fromEnum(enumClass);
        dictRepository.sync(type, items);
    }
}
```

---

## ä¹ã€æ•´ä½“æ¶æ„å›¾ï¼ˆé€»è¾‘æµç¨‹ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         æšä¸¾å®šä¹‰ Enum        â”‚
â”‚  OrderStatus.PENDING, PAID...â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ æ³¨å†Œ
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       å­—å…¸æ³¨å†Œå™¨ DictRegistry â”‚
â”‚  ç»Ÿä¸€åŠ è½½æšä¸¾ä¸æ•°æ®åº“å­—å…¸é¡¹   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ å¯¹å¤–æš´éœ²
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     å­—å…¸æ¥å£ /api/dict/*     â”‚
â”‚ å‰ç«¯ã€ç¬¬ä¸‰æ–¹ç»Ÿä¸€è·å–é€‰é¡¹ä¿¡æ¯ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## åã€ç»“è®ºæ€»ç»“

| å±‚é¢ | è¯´æ˜ |
|------|------|
| å†…éƒ¨å®ç° | æšä¸¾è´Ÿè´£é€»è¾‘ç¨³å®šæ€§ï¼Œå­—å…¸è´Ÿè´£åŠ¨æ€é…ç½® |
| å¤–éƒ¨æ¥å£ | æä¾›ç»Ÿä¸€çš„å­—å…¸æ•°æ®è¾“å‡ºæ ¼å¼ |
| å¥½å¤„ | ç±»å‹å®‰å…¨ã€é€»è¾‘ç¨³å®šã€å±•ç¤ºçµæ´»ã€æ˜“ç»´æŠ¤ã€æ”¯æŒå¤šè¯­è¨€ |
| ä¸€å¥è¯æ€»ç»“ | **å†…éƒ¨å¯å¤šæºï¼Œå¤–éƒ¨è¦ä¸€å£** â€”â€” æšä¸¾ç¨³å®šéª¨æ¶ï¼Œå­—å…¸çµæ´»çš®è‚¤ã€‚ |

---

> ğŸ’¡ æœ€ä½³å®è·µç»“è®ºï¼š  
> å†…éƒ¨é€»è¾‘ä½¿ç”¨æšä¸¾ä¿è¯ç±»å‹å®‰å…¨ä¸ç¨³å®šæ€§ï¼Œ  
> å¤–éƒ¨æ•°æ®é€šè¿‡ç»Ÿä¸€å­—å…¸æ¥å£æš´éœ²ï¼Œ  
> å®ç°â€œé€»è¾‘å±‚å¼ºçº¦æŸ + å±•ç¤ºå±‚å¯é…ç½®â€çš„æœ€ä½³å¹³è¡¡ã€‚
